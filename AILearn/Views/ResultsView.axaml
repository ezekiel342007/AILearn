<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:icons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
             xmlns:converters="clr-namespace:AILearn.Converters"
             xmlns:vm="clr-namespace:AILearn.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="AILearn.Views.ResultsView"
             x:DataType="vm:ResultsViewModel">
    
    <UserControl.Styles>
        <StyleInclude Source="avares://AILearn/Styles/ResultsViewStyles.axaml"/>
    </UserControl.Styles>
    
    <UserControl.Resources>
        <converters:PercentToAngleConverter x:Key="PercentToAngle"/>
    </UserControl.Resources>
    
    <Border Classes="main">
        <Grid RowDefinitions="Auto * Auto Auto Auto" RowSpacing="12">
            <TextBlock Grid.Row="0" 
                       Text="Exam Results"
                       TextAlignment="Center"
                       Foreground="#FFFFFF"/>
            <Grid Grid.Row="1" Width="200" Height="200">
                <Arc Stroke="#333333"
                     StrokeThickness="15"
                     StartAngle="0"
                     SweepAngle="360"
                     Stretch="None"
                     Width="200"
                     Height="200"/>

                <Arc Stroke="#00A8FF"
                     StrokeThickness="15"
                     StrokeLineCap="Round"
                     StartAngle="-90"
                     SweepAngle="{Binding ScorePercent, Converter={StaticResource PercentToAngle}}"
                     Stretch="None"
                     Width="200"
                     Height="200">
                    <Arc.Effect>
                        <DropShadowEffect BlurRadius="10" Color="#00A8FF" Opacity="0.4"/>
                    </Arc.Effect>
                </Arc>

                <StackPanel Orientation="Vertical" VerticalAlignment="Center" HorizontalAlignment="Center">
                    <TextBlock Text="{Binding ScorePercent, StringFormat='{}{0}%'}"
                               FontSize="40"
                               FontWeight="Bold"
                               Foreground="White"
                               HorizontalAlignment="Center"/>
    
                    <TextBlock Text="Final Score"
                               FontSize="14"
                               Foreground="#AAAAAA"
                               HorizontalAlignment="Center"
                               Margin="0,5,0,0"/>
                </StackPanel>
            </Grid>
            <StackPanel Grid.Row="2" 
                        Orientation="Vertical"
                        HorizontalAlignment="Center">
                <Border Classes="scoreRemark"
                        HorizontalAlignment="Center"
                        BorderBrush="#349C5E"
                        Background="#153B2D">
                    <TextBlock Text="{Binding ScoreRemark}"
                               Foreground="#349C5E"/>
                </Border>
                <TextBlock Text="You've completed the Physics Exam" 
                           HorizontalAlignment="Center"
                           Foreground="#626F7F"/>
            </StackPanel>
            <StackPanel Grid.Row="3" Orientation="Vertical" Spacing="12">
                <TextBlock Text="Performance Stats" 
                           Foreground="#FFFFFF"
                           FontWeight="SemiBold"/>
                <StackPanel Orientation="Vertical" Spacing="8">
                    <Grid ColumnDefinitions="* *" ColumnSpacing="8">
                        <Border Grid.Column="0" Classes="statBorder">
                            <StackPanel Orientation="Vertical" Spacing="3">
                                <Grid ColumnDefinitions="Auto *">
                                    <Border Grid.Column="0" Classes="statIconBorder"
                                            Background="#1C312C">
                                        <icons:MaterialIcon Kind="CheckCircle"
                                                            Foreground="#49DC7E"/>
                                    </Border>
                                    <TextBlock Grid.Column="1" Text="{Binding CorrectAnswerCount}"
                                               Foreground="#FFFFFF"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Right"/>        
                                </Grid>
                                <TextBlock TextAlignment="Left"
                                           Foreground="#75818B">
                                    <Run FontWeight="Bold">Correct</Run> <LineBreak/> Answers
                                </TextBlock> 
                            </StackPanel>
                        </Border>
                        
                        <Border Grid.Column="1" Classes="statBorder">
                            <StackPanel Orientation="Vertical">
                                <Grid ColumnDefinitions="Auto *">
                                    <Border Grid.Column="0" Classes="statIconBorder"
                                            Background="#312429">
                                        <icons:MaterialIcon Kind="CrossCircle"
                                                            Foreground="#FF7978"/>
                                    </Border>
                                    <TextBlock Grid.Column="1" Text="{Binding WrongAnswerCount}"
                                               Foreground="#FFFFFF"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Right"/>        
                                </Grid>
                                <TextBlock TextAlignment="Left"
                                           Foreground="#75818B">
                                    <Run FontWeight="Bold">Incorrect</Run> <LineBreak/> Answers
                                </TextBlock> 
                            </StackPanel>
                        </Border>
                    </Grid>
                    
                    <Grid ColumnDefinitions="* *" ColumnSpacing="8">
                        <Border Grid.Column="0" Classes="statBorder">
                            <StackPanel Orientation="Vertical">
                                <Grid ColumnDefinitions="Auto *">
                                    <Border Grid.Column="0" Classes="statIconBorder"
                                            Background="#1F2A3B">
                                        <icons:MaterialIcon Kind="PencilPlus"
                                                            Foreground="#5FA3F8"/>
                                    </Border>
                                    <TextBlock Grid.Column="1" Text="{Binding AttemptedQuestionsCount}"
                                               Foreground="#FFFFFF"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Right"/>        
                                </Grid>
                                <TextBlock TextAlignment="Left"
                                           Foreground="#75818B">
                                    <Run FontWeight="Bold">Attempted</Run> <LineBreak/> Questions
                                </TextBlock> 
                            </StackPanel>
                        </Border>
                        <Border Grid.Column="1" Classes="statBorder">
                            <StackPanel Orientation="Vertical">
                                <Grid ColumnDefinitions="Auto *">
                                    <Border Grid.Column="0" Classes="statIconBorder"
                                            Background="#1F2A3B">
                                        <icons:MaterialIcon Kind="ClockTimeFour"
                                                            Foreground="#5FA3F8"/>
                                    </Border>
                                    <TextBlock Grid.Column="1" Text="{Binding TimeTaken}"
                                               Foreground="#FFFFFF"
                                               VerticalAlignment="Center"
                                               HorizontalAlignment="Right"/>        
                                </Grid>
                                <TextBlock TextAlignment="Left"
                                           Foreground="#75818B">
                                    <Run FontWeight="Bold">Time Taken</Run> <LineBreak/> Minutes
                                </TextBlock> 
                            </StackPanel>
                        </Border>
                    </Grid>
                    
                </StackPanel>
                <Border Classes="insightBorder">
                    <StackPanel Orientation="Vertical">
                        <StackPanel Orientation="Horizontal">
                            <icons:MaterialIcon Kind="HeadCog" 
                                                Foreground="#FFFFFF" 
                                                Width="11" 
                                                Height="11"/>
                            <TextBlock Text="INSIGHT"
                                       Foreground="#FFFFFF"
                                       FontSize="11"/>
                        </StackPanel>
                        <TextBlock Text="{Binding InsightText}" Foreground="#FFFFFF"/>
                    </StackPanel>
                </Border>
            </StackPanel>
            <Grid Grid.Row="4" ColumnDefinitions="* *" ColumnSpacing="8">
                <Button Grid.Column="0" Classes="resultNavBtn">
                    <TextBlock Text="Back to Home" HorizontalAlignment="Center"/>
                </Button>
                <Button Grid.Column="1" Classes="resultNavBtn" Background="#197FE6">
                    <TextBlock Text="Review Answers" HorizontalAlignment="Center"/>
                </Button>
            </Grid>
        </Grid>
    </Border>
</UserControl>
